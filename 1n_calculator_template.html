<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>1/N박 기준 계산기 (달력 & API 연동)</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 720px; margin: auto; background-color: #f9f9f9; }
    input, textarea, button { width: 100%; margin-top: 8px; padding: 10px; font-size: 15px; border-radius: 6px; border: 1px solid #ccc; box-sizing: border-box; }
    button { background: #007BFF; color: white; border: none; cursor: pointer; transition: background 0.2s; }
    button:hover { background: #0056b3; }
    label { font-weight: bold; margin-top: 12px; display: block; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; }
    th, td { border: 1px solid #ccc; padding: 10px; text-align: right; }
    th:first-child, td:first-child { text-align: left; }
    .section { margin-top: 24px; font-weight: bold; font-size: 16px; color: #333; }
    .memo-section { white-space: pre-line; margin-top: 20px; font-size: 14px; color: #444; background: #fff; padding: 12px; border: 1px solid #ddd; border-radius: 6px; }
    .history-entry { cursor: pointer; color: blue; text-decoration: underline; margin-bottom: 6px; display: inline-block; margin-right: 8px; }
    #todayResults, #dateResults { margin-top: 20px; background: #fff; padding: 12px; border: 1px solid #ccc; border-radius: 6px; }
  </style>
</head>
<body>
  <h2>1/N박 기준 계산기 (달력 & API 연동)</h2>

  <label>예약번호</label>
  <input type="text" id="resNum" onblur="fetchReservationData()" />

  <label>기존 일정</label>
  <input type="text" id="originalRange" placeholder="날짜를 선택하세요" />

  <label>변경 일정</label>
  <input type="text" id="newRange" placeholder="날짜를 선택하세요" />

  <label>금액 정보</label>
  <textarea id="amountInput" rows="4" placeholder="예: 호스트 임대료: 1,600,000원, 보증금: 300000원, 청소비: 50000원, 공과금: 150000원, 추가 인원비: 0원"></textarea>

  <button onclick="runCalculation()">계산하기</button>
  <button onclick="saveHistory()">저장</button>

  <div id="summary" class="section"></div>
  <div id="unitRates" class="section"></div>
  <table id="resultTable" style="display:none;">
    <thead><tr><th>항목</th><th>변경 전</th><th>변경 후</th><th>차액</th></tr></thead>
    <tbody id="resultBody"></tbody>
  </table>

  <div id="memo" class="memo-section"></div>
  <div id="cofinance" class="memo-section"></div>

  <div class="section">히스토리</div>
  <ul id="historyList"></ul>

  <div class="section">오늘 조회한 예약건</div>
  <div id="todayResults"></div>

  <div class="section">예약번호 조회</div>
  <input type="text" id="searchResNum" placeholder="예약번호 입력" />
  <button onclick="viewHistory()">조회</button>

  <div class="section">날짜별 조회</div>
  <input type="text" id="datePicker" placeholder="날짜 선택" />
  <div id="dateResults"></div>

  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script>
    // JS will be provided in next step
  </script>
</body>
</html>
